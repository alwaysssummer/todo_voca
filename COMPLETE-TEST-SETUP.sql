-- ===================================================================
-- 🚀 완벽 테스트를 위한 최종 설정
-- Supabase SQL Editor에 복사 & 붙여넣기 후 실행하세요!
-- ===================================================================

-- ==================== STEP 1: RLS 비활성화 ====================
ALTER TABLE student_word_progress DISABLE ROW LEVEL SECURITY;
ALTER TABLE student_wordlists DISABLE ROW LEVEL SECURITY;
ALTER TABLE completed_wordlists DISABLE ROW LEVEL SECURITY;
ALTER TABLE online_tests DISABLE ROW LEVEL SECURITY;

-- ==================== STEP 2: 단어 추가 (31-100번) ====================
INSERT INTO words (wordlist_id, word_text, meaning, example, example_translation, mnemonic, sequence_order) VALUES
-- 31-40
('20000000-0000-0000-0000-000000000001', 'family', '가족', 'I love my family.', '나는 내 가족을 사랑한다.', NULL, 31),
('20000000-0000-0000-0000-000000000001', 'give', '주다', 'Give me the book.', '나에게 그 책을 줘.', NULL, 32),
('20000000-0000-0000-0000-000000000001', 'hello', '안녕', 'Hello, how are you?', '안녕, 어떻게 지내?', NULL, 33),
('20000000-0000-0000-0000-000000000001', 'important', '중요한', 'This is very important.', '이것은 매우 중요하다.', NULL, 34),
('20000000-0000-0000-0000-000000000001', 'knowledge', '지식', 'Knowledge is power.', '지식은 힘이다.', NULL, 35),
('20000000-0000-0000-0000-000000000001', 'learn', '배우다', 'I learn English.', '나는 영어를 배운다.', NULL, 36),
('20000000-0000-0000-0000-000000000001', 'music', '음악', 'I like music.', '나는 음악을 좋아한다.', NULL, 37),
('20000000-0000-0000-0000-000000000001', 'never', '결코 ~하지 않다', 'Never give up!', '절대 포기하지 마!', NULL, 38),
('20000000-0000-0000-0000-000000000001', 'only', '오직', 'I only need you.', '나는 오직 당신만 필요해.', NULL, 39),
('20000000-0000-0000-0000-000000000001', 'play', '놀다', 'Let''s play together.', '함께 놀자.', NULL, 40),
-- 41-50
('20000000-0000-0000-0000-000000000001', 'read', '읽다', 'I read books.', '나는 책을 읽는다.', NULL, 41),
('20000000-0000-0000-0000-000000000001', 'study', '공부하다', 'I study math.', '나는 수학을 공부한다.', NULL, 42),
('20000000-0000-0000-0000-000000000001', 'teach', '가르치다', 'She teaches English.', '그녀는 영어를 가르친다.', NULL, 43),
('20000000-0000-0000-0000-000000000001', 'use', '사용하다', 'I use a computer.', '나는 컴퓨터를 사용한다.', NULL, 44),
('20000000-0000-0000-0000-000000000001', 'want', '원하다', 'I want to eat.', '나는 먹고 싶다.', NULL, 45),
('20000000-0000-0000-0000-000000000001', 'work', '일하다', 'I work hard.', '나는 열심히 일한다.', NULL, 46),
('20000000-0000-0000-0000-000000000001', 'world', '세계', 'I travel the world.', '나는 세계를 여행한다.', NULL, 47),
('20000000-0000-0000-0000-000000000001', 'write', '쓰다', 'I write a letter.', '나는 편지를 쓴다.', NULL, 48),
('20000000-0000-0000-0000-000000000001', 'young', '젊은', 'He is young.', '그는 젊다.', NULL, 49),
('20000000-0000-0000-0000-000000000001', 'about', '~에 대하여', 'Tell me about it.', '그것에 대해 말해줘.', NULL, 50),
-- 51-60
('20000000-0000-0000-0000-000000000001', 'after', '~후에', 'After school', '방과 후에', NULL, 51),
('20000000-0000-0000-0000-000000000001', 'again', '다시', 'Try again!', '다시 해봐!', NULL, 52),
('20000000-0000-0000-0000-000000000001', 'all', '모든', 'All students', '모든 학생들', NULL, 53),
('20000000-0000-0000-0000-000000000001', 'always', '항상', 'I always study.', '나는 항상 공부한다.', NULL, 54),
('20000000-0000-0000-0000-000000000001', 'answer', '대답', 'What''s the answer?', '답이 뭐야?', NULL, 55),
('20000000-0000-0000-0000-000000000001', 'before', '~전에', 'Before dinner', '저녁 식사 전에', NULL, 56),
('20000000-0000-0000-0000-000000000001', 'believe', '믿다', 'I believe you.', '나는 너를 믿어.', NULL, 57),
('20000000-0000-0000-0000-000000000001', 'best', '최고의', 'You are the best!', '너가 최고야!', NULL, 58),
('20000000-0000-0000-0000-000000000001', 'better', '더 나은', 'Better than before', '이전보다 나은', NULL, 59),
('20000000-0000-0000-0000-000000000001', 'big', '큰', 'A big house', '큰 집', NULL, 60),
-- 61-70
('20000000-0000-0000-0000-000000000001', 'call', '부르다', 'Call me later.', '나중에 전화해.', NULL, 61),
('20000000-0000-0000-0000-000000000001', 'can', '할 수 있다', 'I can do it.', '나는 할 수 있어.', NULL, 62),
('20000000-0000-0000-0000-000000000001', 'car', '자동차', 'I have a car.', '나는 자동차가 있다.', NULL, 63),
('20000000-0000-0000-0000-000000000001', 'change', '바꾸다', 'Change your mind.', '마음을 바꿔.', NULL, 64),
('20000000-0000-0000-0000-000000000001', 'child', '아이', 'A little child', '어린 아이', NULL, 65),
('20000000-0000-0000-0000-000000000001', 'city', '도시', 'A big city', '큰 도시', NULL, 66),
('20000000-0000-0000-0000-000000000001', 'class', '수업', 'English class', '영어 수업', NULL, 67),
('20000000-0000-0000-0000-000000000001', 'close', '닫다', 'Close the door.', '문을 닫아.', NULL, 68),
('20000000-0000-0000-0000-000000000001', 'color', '색깔', 'What color?', '무슨 색이야?', NULL, 69),
('20000000-0000-0000-0000-000000000001', 'come', '오다', 'Come here!', '이리 와!', NULL, 70),
-- 71-80
('20000000-0000-0000-0000-000000000001', 'country', '나라', 'My country', '내 나라', NULL, 71),
('20000000-0000-0000-0000-000000000001', 'day', '날', 'Have a nice day!', '좋은 하루 보내!', NULL, 72),
('20000000-0000-0000-0000-000000000001', 'different', '다른', 'Different idea', '다른 생각', NULL, 73),
('20000000-0000-0000-0000-000000000001', 'door', '문', 'Open the door.', '문을 열어.', NULL, 74),
('20000000-0000-0000-0000-000000000001', 'each', '각각의', 'Each student', '각 학생', NULL, 75),
('20000000-0000-0000-0000-000000000001', 'early', '이른', 'Get up early.', '일찍 일어나.', NULL, 76),
('20000000-0000-0000-0000-000000000001', 'easy', '쉬운', 'It''s easy!', '쉬워!', NULL, 77),
('20000000-0000-0000-0000-000000000001', 'end', '끝', 'The end', '끝', NULL, 78),
('20000000-0000-0000-0000-000000000001', 'enough', '충분한', 'Enough time', '충분한 시간', NULL, 79),
('20000000-0000-0000-0000-000000000001', 'every', '모든', 'Every day', '매일', NULL, 80),
-- 81-90
('20000000-0000-0000-0000-000000000001', 'face', '얼굴', 'Wash your face.', '세수해.', NULL, 81),
('20000000-0000-0000-0000-000000000001', 'fact', '사실', 'In fact...', '사실은...', NULL, 82),
('20000000-0000-0000-0000-000000000001', 'fall', '떨어지다', 'Leaves fall.', '잎이 떨어진다.', NULL, 83),
('20000000-0000-0000-0000-000000000001', 'far', '멀리', 'Too far', '너무 멀어', NULL, 84),
('20000000-0000-0000-0000-000000000001', 'fast', '빠른', 'Very fast', '매우 빠른', NULL, 85),
('20000000-0000-0000-0000-000000000001', 'feel', '느끼다', 'I feel happy.', '나는 행복해.', NULL, 86),
('20000000-0000-0000-0000-000000000001', 'few', '몇몇의', 'A few people', '몇몇 사람들', NULL, 87),
('20000000-0000-0000-0000-000000000001', 'find', '찾다', 'Find your way.', '길을 찾아.', NULL, 88),
('20000000-0000-0000-0000-000000000001', 'first', '첫번째', 'The first day', '첫 날', NULL, 89),
('20000000-0000-0000-0000-000000000001', 'follow', '따르다', 'Follow me!', '나를 따라와!', NULL, 90),
-- 91-100
('20000000-0000-0000-0000-000000000001', 'food', '음식', 'Good food', '좋은 음식', NULL, 91),
('20000000-0000-0000-0000-000000000001', 'forget', '잊다', 'Don''t forget!', '잊지 마!', NULL, 92),
('20000000-0000-0000-0000-000000000001', 'free', '자유로운', 'Feel free!', '편하게 해!', NULL, 93),
('20000000-0000-0000-0000-000000000001', 'full', '가득한', 'I''m full.', '배불러.', NULL, 94),
('20000000-0000-0000-0000-000000000001', 'future', '미래', 'In the future', '미래에', NULL, 95),
('20000000-0000-0000-0000-000000000001', 'game', '게임', 'Let''s play a game.', '게임하자.', NULL, 96),
('20000000-0000-0000-0000-000000000001', 'great', '훌륭한', 'Great job!', '잘했어!', NULL, 97),
('20000000-0000-0000-0000-000000000001', 'group', '그룹', 'Study group', '스터디 그룹', NULL, 98),
('20000000-0000-0000-0000-000000000001', 'grow', '자라다', 'Trees grow.', '나무가 자란다.', NULL, 99),
('20000000-0000-0000-0000-000000000001', 'hand', '손', 'Raise your hand.', '손을 들어.', NULL, 100);

-- ==================== STEP 3: wordlist total_words 업데이트 ====================
UPDATE wordlists 
SET total_words = 100 
WHERE id = '20000000-0000-0000-0000-000000000001';

-- ==================== STEP 4: 김철수 진행 상황 초기화 ====================
DELETE FROM completed_wordlists WHERE student_id = '10000001-0000-0000-0000-000000000001';
DELETE FROM student_word_progress WHERE student_id = '10000001-0000-0000-0000-000000000001';
DELETE FROM student_wordlists WHERE student_id = '10000001-0000-0000-0000-000000000001' AND is_auto_generated = TRUE;

UPDATE student_wordlists
SET 
  generation = 1,
  daily_goal = 50,
  filtered_word_ids = NULL,
  is_auto_generated = FALSE,
  base_wordlist_id = wordlist_id
WHERE student_id = '10000001-0000-0000-0000-000000000001';

-- ==================== 완료 메시지 ====================
SELECT 
  '🎉 완벽 테스트 설정 완료!' as status,
  '✅ RLS 비활성화 완료' as step1,
  '✅ 단어 100개 생성 완료' as step2,
  '✅ 김철수 초기화 완료' as step3,
  '' as blank,
  '🔗 테스트 시작:' as next,
  'http://localhost:3000/s/10000001-0000-0000-0000-000000000001' as link;

