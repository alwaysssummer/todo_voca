# Todo Voca - 상세 개발 플랜 (화면 중심)

> 📅 최종 수정: 2025-10-28  
> 🎯 목표: Shadcn UI 기반 웹 애플리케이션 (실사용 중심)

---

## 📊 개발 진행 상황 (Progress Dashboard)

### 전체 진행률
```
Phase 1 (MVP): [████████████████████] 100% (10/10) ✅
Phase 2 (고도화): [░░░░░░░░░░░░░░░░░░░░] 0% (0/6)
Phase 3 (선택): [░░░░░░░░░░░░░░░░░░░░] 0% (0/6)

전체: [█████████░░░░░░░░░░░] 45% (10/22)

🎉 Week 1 완료! (100%)
🎉 Week 2 Day 8-9 완료! (온라인 평가)
🎉 Week 2 Day 10-11 완료! (강사 대시보드)
🎉 Week 2 Day 12-13 완료! (학생 관리)
🎉 Week 2 Day 14 완료! (세대별 단어장 시스템 v2)
🎉 Phase 1 (MVP) 완료! 🚀
🌟 세대별 단어장 시스템 v2 완료! (1차→2차→3차 자동 복습)
🔧 핵심 로직 수정 완료! (Day 계산, 목표 달성 조건 개선)
📊 학생 대시보드 구현 완료! (진행 상황 종합 확인)
```

### Phase 1: MVP 개발 (2주)

#### Week 1: 학생 화면 핵심
| 작업 | 상태 | 완료일 | 비고 |
|-----|------|--------|------|
| **Day 1-2: 환경 설정** | ✅ 완료 | 2025-10-28 | 기본 구조 완성 |
| ├─ Next.js 14 프로젝트 생성 | ✅ 완료 | 2025-10-28 | TypeScript + Tailwind |
| ├─ Shadcn UI 설치 및 설정 | ✅ 완료 | 2025-10-28 | 기본 컴포넌트 생성 |
| ├─ Supabase 연동 | ✅ 완료 | 2025-10-28 | 클라이언트 설정 |
| ├─ 테이블 생성 (단순화) | ✅ 완료 | 2025-10-28 | SQL 스크립트 작성 |
| └─ 라우팅 설정 (`/s/[token]`) | ✅ 완료 | 2025-10-28 | 동적 라우팅 구현 |
| **Day 3-4: 학습 화면** | ✅ 완료 | 2025-10-28 | useStudySession Hook 생성 |
| ├─ 학생 학습 페이지 | ✅ 완료 | 2025-10-28 | 완전 작동 |
| ├─ 헤더 컴포넌트 | ✅ 완료 | 2025-10-28 | 진도 % 표시 |
| ├─ 현재 단어 영역 | ✅ 완료 | 2025-10-28 | 애니메이션 추가 |
| ├─ [안다]/[모른다] 버튼 | ✅ 완료 | 2025-10-28 | DB 연동 완료 |
| └─ 완료 단어 목록 | ✅ 완료 | 2025-10-28 | 실시간 업데이트 |
| **Day 5-6: Skip 모달** | ✅ 완료 | 2025-10-28 | 2개 모달 + 분기 로직 |
| ├─ Skip 모달 (1-2회) | ✅ 완료 | 2025-10-28 | 최소 정보 (뜻+발음) |
| ├─ Skip 모달 (3-4회) | ✅ 완료 | 2025-10-28 | 상세 정보 (예문+연상법) |
| ├─ 분기 로직 | ✅ 완료 | 2025-10-28 | skipCount 기반 |
| └─ 발음 재생 기능 | ✅ 완료 | 2025-10-28 | Web Audio API |
| **Day 7: 일일 목표** | ✅ 완료 | 2025-10-28 | Week 1 완료! 🎉 |
| ├─ 목표 달성 감지 | ✅ 완료 | 2025-10-28 | newToday >= goal |
| ├─ 축하 모달 | ✅ 완료 | 2025-10-28 | Trophy 애니메이션 |
| └─ 완성 단어장 생성 | ✅ 완료 | 2025-10-28 | Day 번호 자동 계산 |

#### Week 2: 온라인 평가 + 강사 화면
| 작업 | 상태 | 완료일 | 비고 |
|-----|------|--------|------|
| **Day 8-9: 온라인 평가** | ✅ 완료 | 2025-10-28 | 전체 플로우 완성! |
| ├─ 평가 시작 화면 | ✅ 완료 | 2025-10-28 | 평가 정보 안내 |
| ├─ 문제 생성 로직 | ✅ 완료 | 2025-10-28 | 20% 무작위 선택 |
| ├─ 주관식 입력 화면 | ✅ 완료 | 2025-10-28 | 이전/다음 네비게이션 |
| ├─ 타이머 기능 | ✅ 완료 | 2025-10-28 | 5분 제한 + 자동 제출 |
| ├─ 자동 채점 로직 | ✅ 완료 | 2025-10-28 | 정규화 비교 |
| └─ 결과 화면 | ✅ 완료 | 2025-10-28 | 점수/오답노트 표시 |
| **Day 10-11: 강사 대시보드** | ✅ 완료 | 2025-10-28 | 기본 대시보드 완성 |
| ├─ 강사 로그인 | ✅ 완료 | 2025-10-28 | 세션 관리 |
| ├─ 메인 대시보드 | ✅ 완료 | 2025-10-28 | 요약 통계 + 목록 |
| ├─ 단어장 목록 카드 | ✅ 완료 | 2025-10-28 | 그리드 레이아웃 |
| └─ 학생 목록 조회 | ✅ 완료 | 2025-10-28 | 진도바 + 링크 복사 |
| **Day 12-13: 학생 관리** | ✅ 완료 | 2025-10-28 | 학생 관리 기능 완성 |
| ├─ 학생 추가 다이얼로그 | ✅ 완료 | 2025-10-28 | UUID 자동 생성 |
| ├─ 학생 검색 기능 | ✅ 완료 | 2025-10-28 | 이름 검색 |
| ├─ 단어장 배정 다이얼로그 | ✅ 완료 | 2025-10-28 | 다중 선택 |
| ├─ 학생 상세 페이지 | ✅ 완료 | 2025-10-28 | 통계 + 완성 단어장 |
| └─ 접속 링크 복사 | ✅ 완료 | 2025-10-28 | Clipboard API |
| **Day 14: 테스트 및 배포** | 🔄 진행중 | 2025-10-28 | 테스트 및 버그 수정 완료 |
| ├─ 전체 플로우 테스트 | ✅ 완료 | 2025-10-28 | 모든 주요 기능 확인 |
| ├─ 버그 수정 | ✅ 완료 | 2025-10-28 | completedWordlistId 등 수정 |
| ├─ 반응형 체크 | ⬜ 대기 | - | 추후 진행 |
| └─ Vercel 배포 | ⬜ 대기 | - | 추후 진행 |

### Phase 2: 고도화 (2주)
| 작업 | 상태 | 완료일 | 비고 |
|-----|------|--------|------|
| Skip 모달 (5회+) 미션 | ⬜ 대기 | - | - |
| Skip 통계 화면 | ⬜ 대기 | - | - |
| 온라인 평가 분석 | ⬜ 대기 | - | - |
| 오프라인 시험 출제 (PDF) | ⬜ 대기 | - | - |
| 오프라인 시험 결과 입력 | ⬜ 대기 | - | - |
| 완성 단어장 보기 | ⬜ 대기 | - | - |

### Phase 3: 선택 기능
| 작업 | 상태 | 완료일 | 비고 |
|-----|------|--------|------|
| 단어장 CSV 가져오기 | ⬜ 대기 | - | - |
| 단어 편집 기능 | ⬜ 대기 | - | - |
| 푸시 알림 | ⬜ 대기 | - | - |
| AI 연상법 생성 | ⬜ 대기 | - | - |
| 이미지 검색 | ⬜ 대기 | - | - |
| 음성 인식 평가 | ⬜ 대기 | - | - |

---

## 🔧 핵심 변경사항

### 1. 기술 스택 변경

#### 프론트엔드
```
✅ Framework: Next.js 14 (App Router)
✅ UI 라이브러리: Shadcn UI + Tailwind CSS
✅ 상태 관리: Zustand 또는 React Query
✅ 차트: Recharts
```

#### 백엔드
```
✅ 데이터베이스: Supabase (PostgreSQL)
✅ 인증: 단순화된 URL 기반 접근
   - 강사: 비밀번호 로그인 (1인)
   - 학생: UUID 기반 개인 URL
```

### 2. 인증 구조 단순화

**기존 (복잡):**
- 학생/강사 모두 이메일 + 비밀번호
- 복잡한 권한 관리
- 회원가입 프로세스

**변경 (단순):**
- 강사: 1명만 존재, 일반 로그인
- 학생: `/s/{uuid}` URL로 즉시 접근
- 비밀번호 불필요, 링크만 공유

### 3. UI 철학

```
❌ 제거: 불필요한 설명, 튜토리얼, 가이드 텍스트
✅ 추가: 직관적 아이콘, 명확한 액션 버튼
✅ 원칙: "보면 알 수 있는" 인터페이스
```

---

## 🗂️ 수정된 데이터베이스 설계

### users 테이블 (단순화)

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(100) NOT NULL,
    role VARCHAR(20) CHECK (role IN ('teacher', 'student')),
    
    -- 강사 전용 (1명만 존재)
    email VARCHAR(255) UNIQUE,
    password_hash VARCHAR(255),
    
    -- 학생 전용
    access_token UUID UNIQUE DEFAULT uuid_generate_v4(),  -- URL용
    daily_goal INT DEFAULT 50,
    
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_users_role ON users(role);
CREATE INDEX idx_users_access_token ON users(access_token);
```

### 접근 방식
- **강사**: `/teacher/login` → 세션 기반 인증
- **학생**: `/s/{access_token}` → 토큰으로 즉시 접근

**나머지 테이블은 마스터 플랜과 동일:**
- wordlists
- words
- student_wordlists
- student_word_progress
- completed_wordlists
- online_tests
- offline_tests

---

## 📱 화면별 상세 개발 가이드

### 1️⃣ 학생 학습 화면 (`/s/{token}`)

#### 화면 레이아웃

```
┌─────────────────────────────────────┐
│ [상단 헤더 - 고정]              h-20 │
│ ┌─────────────────────────────────┐ │
│ │ 철수님 | Day 3 | 23/50          │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ [현재 단어 영역]               h-1/3 │
│                                     │
│          achieve                    │
│          (text-6xl)                 │
│                                     │
│ ┌─────────┐  ┌─────────┐          │
│ │   안다   │  │ 모른다  │          │
│ └─────────┘  └─────────┘          │
├─────────────────────────────────────┤
│ [완료 단어 목록]               h-2/3 │
│ 완료 23                             │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 23. knowledge              ✨   │ │
│ │ 22. success                     │ │
│ │ 21. computer                    │ │
│ │ ...                             │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### Shadcn 컴포넌트 구현

```tsx
// app/s/[token]/page.tsx
import { StudyScreen } from '@/components/student/study-screen'

export default function StudentPage({ 
  params 
}: { 
  params: { token: string } 
}) {
  return <StudyScreen token={params.token} />
}
```

```tsx
// components/student/study-screen.tsx
import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { ScrollArea } from "@/components/ui/scroll-area"

export function StudyScreen({ token }: { token: string }) {
  const {
    currentWord,
    completedWords,
    progress,
    handleKnow,
    handleDontKnow
  } = useStudySession(token)

  return (
    <div className="h-screen flex flex-col">
      {/* 헤더 */}
      <header className="h-20 border-b px-6 flex items-center justify-between">
        <div className="flex items-center gap-4">
          <h2 className="text-lg font-semibold">{student.name}</h2>
          <Badge variant="outline">Day {progress.day}</Badge>
        </div>
        <div className="text-2xl font-bold">
          {progress.today}/{progress.goal}
        </div>
      </header>

      {/* 현재 단어 */}
      <section className="h-1/3 flex flex-col items-center justify-center gap-8 bg-gradient-to-b from-background to-muted/20">
        <h1 className="text-6xl font-bold tracking-tight">
          {currentWord?.word_text}
        </h1>
        <div className="flex gap-4">
          <Button 
            size="lg" 
            onClick={handleKnow}
            className="min-w-[120px]"
          >
            안다
          </Button>
          <Button 
            size="lg" 
            variant="outline" 
            onClick={handleDontKnow}
            className="min-w-[120px]"
          >
            모른다
          </Button>
        </div>
      </section>

      {/* 완료 목록 */}
      <section className="h-2/3 border-t bg-muted/10">
        <div className="p-6">
          <p className="text-sm text-muted-foreground mb-4">
            완료 {completedWords.length}
          </p>
          <ScrollArea className="h-[calc(66vh-8rem)]">
            <div className="space-y-2">
              {completedWords.map((word, idx) => (
                <Card 
                  key={word.id} 
                  className="p-4 hover:bg-accent/50 transition-colors"
                >
                  <div className="flex justify-between items-center">
                    <span className="font-medium">
                      {completedWords.length - idx}. {word.word_text}
                    </span>
                    {idx === 0 && (
                      <span className="text-xl animate-bounce">✨</span>
                    )}
                  </div>
                </Card>
              ))}
            </div>
          </ScrollArea>
        </div>
      </section>
    </div>
  )
}
```

#### 로직: useStudySession Hook

```typescript
// hooks/useStudySession.ts
import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'

export function useStudySession(token: string) {
  const [student, setStudent] = useState(null)
  const [currentWord, setCurrentWord] = useState<Word | null>(null)
  const [completedWords, setCompletedWords] = useState<Word[]>([])
  const [progress, setProgress] = useState({ today: 0, goal: 50, day: 1 })

  // 학생 정보 가져오기
  useEffect(() => {
    async function fetchStudent() {
      const { data } = await supabase
        .from('users')
        .select('*')
        .eq('access_token', token)
        .eq('role', 'student')
        .single()
      
      setStudent(data)
      setProgress(prev => ({ ...prev, goal: data.daily_goal }))
    }
    fetchStudent()
  }, [token])

  // 다음 단어 가져오기
  const fetchNextWord = async () => {
    const { data } = await supabase
      .rpc('get_next_word', {
        p_student_id: student.id
      })
    
    setCurrentWord(data)
  }

  // [안다] 클릭
  const handleKnow = async () => {
    // 진도 업데이트
    await supabase
      .from('student_word_progress')
      .upsert({
        student_id: student.id,
        word_id: currentWord.id,
        status: 'completed',
        completed_date: new Date().toISOString().split('T')[0]
      })

    // 완료 목록에 추가
    setCompletedWords([currentWord, ...completedWords])
    setProgress(prev => ({ ...prev, today: prev.today + 1 }))

    // 목표 달성 체크
    if (progress.today + 1 >= progress.goal) {
      // 완성 단어장 생성
      await createCompletedWordlist()
      // 축하 모달 표시
      showGoalAchievedModal()
      return
    }

    // 다음 단어 로드
    fetchNextWord()
  }

  // [모른다] 클릭
  const handleDontKnow = async () => {
    // 현재 skip_count 조회
    const { data } = await supabase
      .from('student_word_progress')
      .select('skip_count')
      .eq('student_id', student.id)
      .eq('word_id', currentWord.id)
      .maybeSingle()

    const skipCount = (data?.skip_count || 0) + 1

    // Skip 모달 표시
    showSkipModal(currentWord, skipCount)
  }

  return {
    student,
    currentWord,
    completedWords,
    progress,
    handleKnow,
    handleDontKnow
  }
}
```

---

### 2️⃣ Skip 모달 (1-2회) - 최소 정보

```tsx
// components/student/skip-modal-minimal.tsx
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"

interface SkipModalMinimalProps {
  word: Word
  open: boolean
  onClose: () => void
  onSkip: () => void
}

export function SkipModalMinimal({ 
  word, 
  open, 
  onClose,
  onSkip 
}: SkipModalMinimalProps) {
  const [isPlaying, setIsPlaying] = useState(false)

  const handlePlayAudio = () => {
    const audio = new Audio(word.audio_url)
    audio.play()
    setIsPlaying(true)
    audio.onended = () => setIsPlaying(false)
  }

  const handleSkipToTomorrow = async () => {
    await onSkip()
    onClose()
  }

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="sm:max-w-[320px]">
        <DialogHeader>
          <DialogTitle className="text-3xl font-bold text-center">
            {word.word_text}
          </DialogTitle>
        </DialogHeader>
        
        <div className="space-y-4 py-4">
          <div className="flex items-start gap-3">
            <span className="text-2xl">💡</span>
            <p className="text-lg pt-1">{word.meaning}</p>
          </div>

          {word.audio_url && (
            <Button
              variant="outline"
              className="w-full"
              onClick={handlePlayAudio}
              disabled={isPlaying}
            >
              🔊 발음
            </Button>
          )}
        </div>

        <Button 
          onClick={handleSkipToTomorrow} 
          className="w-full"
        >
          내일 다시
        </Button>
      </DialogContent>
    </Dialog>
  )
}
```

---

### 3️⃣ Skip 모달 (3-4회) - 상세 정보

```tsx
// components/student/skip-modal-medium.tsx
import { Alert, AlertDescription } from "@/components/ui/alert"
import { AlertTriangle } from "lucide-react"

export function SkipModalMedium({ 
  word, 
  skipCount,
  open, 
  onClose,
  onSkip 
}: SkipModalMediumProps) {
  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="sm:max-w-[500px] max-h-[80vh]">
        <DialogHeader>
          <DialogTitle className="text-4xl font-bold">
            {word.word_text}
          </DialogTitle>
        </DialogHeader>

        <Alert variant="destructive">
          <AlertTriangle className="h-4 w-4" />
          <AlertDescription>
            {skipCount}번 건너뛰었어요
          </AlertDescription>
        </Alert>

        <ScrollArea className="max-h-[400px]">
          <div className="space-y-6 py-4">
            {/* 뜻 */}
            <div>
              <h4 className="font-semibold mb-2 flex items-center gap-2">
                <span>💡</span> 뜻
              </h4>
              <p className="text-lg">{word.meaning}</p>
            </div>

            {/* 예문 */}
            {word.example && (
              <div>
                <h4 className="font-semibold mb-2 flex items-center gap-2">
                  <span>📖</span> 예문
                </h4>
                <p className="mb-2 text-muted-foreground italic">
                  {word.example}
                </p>
                <p className="text-sm">{word.example_translation}</p>
              </div>
            )}

            {/* 연상법 */}
            {word.mnemonic && (
              <div>
                <h4 className="font-semibold mb-2 flex items-center gap-2">
                  <span>🧠</span> 연상법
                </h4>
                <p className="bg-muted p-3 rounded-lg">{word.mnemonic}</p>
              </div>
            )}

            {/* 발음 */}
            {word.audio_url && (
              <Button 
                variant="outline" 
                className="w-full"
                onClick={handlePlayAudio}
              >
                🔊 발음 듣기
              </Button>
            )}
          </div>
        </ScrollArea>

        <Button onClick={handleSkipToTomorrow} className="w-full">
          내일 다시
        </Button>
      </DialogContent>
    </Dialog>
  )
}
```

---

### 4️⃣ 일일 목표 달성 모달

```tsx
// components/student/goal-achieved-modal.tsx
export function GoalAchievedModal({ 
  open, 
  onClose, 
  onStartTest 
}: GoalAchievedModalProps) {
  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="sm:max-w-[400px]">
        <div className="text-center space-y-6 py-6">
          <div className="text-7xl animate-bounce">🎉</div>
          
          <div>
            <h2 className="text-3xl font-bold mb-2">목표 달성!</h2>
            <p className="text-muted-foreground">
              오늘 {progress.goal}개 단어를 완료했어요
            </p>
          </div>

          <div className="space-y-3">
            <Button 
              onClick={onStartTest} 
              className="w-full" 
              size="lg"
            >
              온라인 평가 시작
            </Button>
            <Button 
              onClick={onClose} 
              variant="outline" 
              className="w-full"
            >
              나중에 하기
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  )
}
```

---

### 5️⃣ 온라인 평가 화면

```tsx
// app/s/[token]/test/page.tsx
import { OnlineTest } from '@/components/student/online-test'

export default function TestPage({ params }: { params: { token: string } }) {
  return <OnlineTest token={params.token} />
}
```

```tsx
// components/student/online-test.tsx
import { Clock } from "lucide-react"

export function OnlineTest({ token }: { token: string }) {
  const {
    questions,
    currentIndex,
    answers,
    timeLeft,
    handleAnswerChange,
    handleNext,
    handlePrevious,
    handleSubmit
  } = useOnlineTest(token)

  return (
    <div className="container max-w-2xl mx-auto py-8 px-4">
      {/* 헤더 */}
      <div className="flex justify-between items-center mb-8">
        <Badge variant="outline" className="text-base">
          문제 {currentIndex + 1}/{questions.length}
        </Badge>
        <div className="flex items-center gap-2 text-lg">
          <Clock className="h-5 w-5" />
          <span className="font-mono tabular-nums">
            {formatTime(timeLeft)}
          </span>
        </div>
      </div>

      {/* 문제 */}
      <Card className="p-8 mb-8">
        <h2 className="text-5xl md:text-6xl font-bold text-center mb-12">
          {questions[currentIndex]?.word}
        </h2>

        <div className="space-y-4">
          <Label htmlFor="answer" className="text-base">
            뜻을 입력하세요
          </Label>
          <Input
            id="answer"
            value={answers[questions[currentIndex]?.wordId] || ''}
            onChange={(e) => handleAnswerChange(e.target.value)}
            placeholder="답을 입력하세요"
            className="text-lg h-12"
            autoFocus
          />
        </div>
      </Card>

      {/* 네비게이션 */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={handlePrevious}
          disabled={currentIndex === 0}
          size="lg"
        >
          이전
        </Button>
        
        {currentIndex < questions.length - 1 ? (
          <Button onClick={handleNext} size="lg">
            다음
          </Button>
        ) : (
          <Button onClick={handleSubmit} size="lg">
            제출
          </Button>
        )}
      </div>
    </div>
  )
}
```

---

### 6️⃣ 평가 결과 화면

```tsx
// components/student/test-result.tsx
export function TestResult({ result }: { result: TestResult }) {
  const { score, correctCount, totalQuestions, wrongWords } = result

  return (
    <div className="container max-w-2xl mx-auto py-8 px-4">
      <Card className="p-8">
        <div className="text-center space-y-6">
          <div className="text-6xl">
            {score >= 80 ? '🎉' : score >= 60 ? '😊' : '💪'}
          </div>

          <div>
            <h2 className="text-3xl font-bold mb-2">평가 완료!</h2>
            <p className="text-5xl font-bold text-primary my-4">
              {score}점
            </p>
            <p className="text-muted-foreground">
              {correctCount}/{totalQuestions} 문제 정답
            </p>
          </div>

          {/* 정답 */}
          {correctCount > 0 && (
            <div className="text-left">
              <h3 className="font-semibold mb-3 flex items-center gap-2">
                <span>✅</span> 정답 ({correctCount}개)
              </h3>
              <div className="flex flex-wrap gap-2">
                {result.correctWords.map(word => (
                  <Badge key={word} variant="outline">
                    {word}
                  </Badge>
                ))}
              </div>
            </div>
          )}

          {/* 오답 */}
          {wrongWords.length > 0 && (
            <div className="text-left">
              <h3 className="font-semibold mb-3 flex items-center gap-2">
                <span>❌</span> 오답 ({wrongWords.length}개)
              </h3>
              <div className="space-y-3">
                {wrongWords.map(wrong => (
                  <Card key={wrong.wordId} className="p-4">
                    <div className="font-semibold mb-1">
                      {wrong.word}
                    </div>
                    <div className="text-sm space-y-1">
                      <div className="flex gap-2">
                        <span className="text-muted-foreground">내 답:</span>
                        <span className="text-destructive">
                          {wrong.studentAnswer || '(입력 안 함)'}
                        </span>
                      </div>
                      <div className="flex gap-2">
                        <span className="text-muted-foreground">정답:</span>
                        <span className="text-primary font-medium">
                          {wrong.correctAnswer}
                        </span>
                      </div>
                    </div>
                  </Card>
                ))}
              </div>
            </div>
          )}

          <Alert>
            <AlertDescription>
              💡 틀린 단어는 복습 목록에 추가되었어요
            </AlertDescription>
          </Alert>

          <Button onClick={handleClose} className="w-full" size="lg">
            확인
          </Button>
        </div>
      </Card>
    </div>
  )
}
```

---

### 7️⃣ 강사 로그인 화면

```tsx
// app/teacher/login/page.tsx
export default function TeacherLoginPage() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [isLoading, setIsLoading] = useState(false)

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)

    try {
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password,
      })

      if (error) throw error

      // 강사 권한 확인
      const { data: user } = await supabase
        .from('users')
        .select('role')
        .eq('id', data.user.id)
        .single()

      if (user.role === 'teacher') {
        router.push('/teacher')
      } else {
        throw new Error('강사 계정이 아닙니다')
      }
    } catch (error) {
      toast.error('로그인 실패')
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-muted/30">
      <Card className="w-full max-w-md p-8">
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold mb-2">Todo Voca</h1>
          <p className="text-muted-foreground">강사 로그인</p>
        </div>

        <form onSubmit={handleLogin} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="email">이메일</Label>
            <Input
              id="email"
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="password">비밀번호</Label>
            <Input
              id="password"
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
            />
          </div>

          <Button 
            type="submit" 
            className="w-full" 
            disabled={isLoading}
          >
            {isLoading ? '로그인 중...' : '로그인'}
          </Button>
        </form>
      </Card>
    </div>
  )
}
```

---

### 8️⃣ 강사 메인 대시보드

```tsx
// app/teacher/page.tsx
import { Plus } from "lucide-react"

export default function TeacherDashboard() {
  const { wordlists } = useWordlists()

  return (
    <div className="container mx-auto py-8 px-4">
      <div className="flex justify-between items-center mb-8">
        <h1 className="text-3xl font-bold">단어장 관리</h1>
        <Button>
          <Plus className="mr-2 h-4 w-4" />
          새 단어장
        </Button>
      </div>

      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {wordlists.map(wordlist => (
          <Card key={wordlist.id} className="hover:shadow-lg transition-shadow">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                📖 {wordlist.name}
              </CardTitle>
              <CardDescription>
                {wordlist.total_words}개 단어
              </CardDescription>
            </CardHeader>
            
            <CardContent className="space-y-3">
              <div className="flex justify-between text-sm">
                <span className="text-muted-foreground">학습 중</span>
                <span className="font-semibold">
                  {wordlist.student_count}명
                </span>
              </div>
              
              <div className="flex justify-between text-sm">
                <span className="text-muted-foreground">평균 진도</span>
                <div className="flex items-center gap-2">
                  <Progress 
                    value={wordlist.avg_progress} 
                    className="w-16 h-2"
                  />
                  <span className="font-semibold">
                    {wordlist.avg_progress}%
                  </span>
                </div>
              </div>
              
              <div className="flex justify-between text-sm">
                <span className="text-muted-foreground">평균 점수</span>
                <span className="font-semibold">
                  {wordlist.avg_score ? `${wordlist.avg_score}점` : '-'}
                </span>
              </div>
            </CardContent>
            
            <CardFooter className="gap-2">
              <Button 
                variant="outline" 
                size="sm" 
                className="flex-1"
                onClick={() => router.push(`/teacher/wordlist/${wordlist.id}`)}
              >
                상세
              </Button>
              <Button 
                variant="outline" 
                size="sm" 
                className="flex-1"
                onClick={() => router.push(`/teacher/wordlist/${wordlist.id}/stats`)}
              >
                통계
              </Button>
            </CardFooter>
          </Card>
        ))}
      </div>
    </div>
  )
}
```

---

### 9️⃣ 학생 현황 화면

```tsx
// app/teacher/wordlist/[id]/students/page.tsx
import { Link2, Plus } from "lucide-react"

export default function StudentProgressPage({ 
  params 
}: { 
  params: { id: string } 
}) {
  const { students, wordlist } = useStudentProgress(params.id)

  const copyStudentLink = (accessToken: string) => {
    const url = `${window.location.origin}/s/${accessToken}`
    navigator.clipboard.writeText(url)
    toast.success('링크가 복사되었습니다')
  }

  return (
    <div className="container mx-auto py-8 px-4">
      <div className="mb-6">
        <h1 className="text-3xl font-bold mb-2">{wordlist.name}</h1>
        <p className="text-muted-foreground">
          {wordlist.total_words}개 단어
        </p>
      </div>

      <Tabs defaultValue="students" className="w-full">
        <TabsList>
          <TabsTrigger value="students">학생 현황</TabsTrigger>
          <TabsTrigger value="skip">Skip 통계</TabsTrigger>
          <TabsTrigger value="test">평가 분석</TabsTrigger>
        </TabsList>

        <TabsContent value="students">
          <Card>
            <CardHeader>
              <div className="flex justify-between items-center">
                <CardTitle>학생 현황 ({students.length}명)</CardTitle>
                <Button size="sm">
                  <Plus className="mr-2 h-4 w-4" />
                  학생 추가
                </Button>
              </div>
            </CardHeader>
            
            <CardContent>
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead>이름</TableHead>
                    <TableHead>진도</TableHead>
                    <TableHead>Skip</TableHead>
                    <TableHead>점수</TableHead>
                    <TableHead>상태</TableHead>
                    <TableHead className="text-right">링크</TableHead>
                  </TableRow>
                </TableHeader>
                
                <TableBody>
                  {students.map(student => (
                    <TableRow key={student.id}>
                      <TableCell className="font-medium">
                        {student.name}
                      </TableCell>
                      
                      <TableCell>
                        <div className="flex items-center gap-3">
                          <Progress 
                            value={student.progress} 
                            className="w-24"
                          />
                          <span className="text-sm font-medium min-w-[3ch]">
                            {student.progress}%
                          </span>
                        </div>
                      </TableCell>
                      
                      <TableCell>
                        <span className={cn(
                          "text-sm",
                          student.skip_rate > 20 && "text-destructive font-semibold"
                        )}>
                          {student.skip_rate}%
                        </span>
                      </TableCell>
                      
                      <TableCell>
                        {student.avg_score ? (
                          <span className={cn(
                            "font-medium",
                            student.avg_score >= 80 && "text-green-600",
                            student.avg_score < 70 && "text-destructive"
                          )}>
                            {student.avg_score}점
                          </span>
                        ) : (
                          <span className="text-muted-foreground">-</span>
                        )}
                      </TableCell>
                      
                      <TableCell>
                        <Badge variant={getStatusVariant(student)}>
                          {getStatusIcon(student)}
                        </Badge>
                      </TableCell>
                      
                      <TableCell className="text-right">
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => copyStudentLink(student.access_token)}
                        >
                          <Link2 className="h-4 w-4" />
                        </Button>
                      </TableCell>
                    </TableRow>
                  ))}
                </TableBody>
              </Table>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="skip">
          <SkipStatsTab wordlistId={params.id} />
        </TabsContent>

        <TabsContent value="test">
          <TestAnalyticsTab wordlistId={params.id} />
        </TabsContent>
      </Tabs>
    </div>
  )
}

// 상태 계산 유틸리티
function getStatusVariant(student: Student) {
  if (student.progress < 15 || !student.avg_score) {
    return "destructive"
  }
  if (student.progress < 30 || student.skip_rate > 20 || student.avg_score < 70) {
    return "warning"
  }
  return "success"
}

function getStatusIcon(student: Student) {
  if (student.progress < 15 || !student.avg_score) return "🔴"
  if (student.progress < 30 || student.skip_rate > 20 || student.avg_score < 70) return "⚠️"
  return "🟢"
}
```

---

## 🎨 Shadcn UI 컴포넌트 매핑

| 화면 요소 | Shadcn 컴포넌트 | 설치 명령 |
|----------|----------------|----------|
| 버튼 | Button | `npx shadcn-ui@latest add button` |
| 카드 | Card | `npx shadcn-ui@latest add card` |
| 모달 | Dialog | `npx shadcn-ui@latest add dialog` |
| 입력 | Input | `npx shadcn-ui@latest add input` |
| 배지 | Badge | `npx shadcn-ui@latest add badge` |
| 스크롤 | ScrollArea | `npx shadcn-ui@latest add scroll-area` |
| 테이블 | Table | `npx shadcn-ui@latest add table` |
| 탭 | Tabs | `npx shadcn-ui@latest add tabs` |
| 프로그레스바 | Progress | `npx shadcn-ui@latest add progress` |
| 알림 | Alert | `npx shadcn-ui@latest add alert` |
| 토스트 | Toast | `npx shadcn-ui@latest add toast` |
| 라벨 | Label | `npx shadcn-ui@latest add label` |

---

## 🚀 시작 가이드

### 1단계: 프로젝트 초기화

```bash
# Next.js 프로젝트 생성
npx create-next-app@latest todo-voca --typescript --tailwind --app

cd todo-voca

# Shadcn UI 초기화
npx shadcn-ui@latest init

# 필요한 모든 컴포넌트 일괄 설치
npx shadcn-ui@latest add button card dialog input badge scroll-area table tabs progress alert toast label
```

### 2단계: Supabase 설정

```bash
# Supabase 클라이언트 설치
npm install @supabase/supabase-js

# 추가 유틸리티
npm install zustand react-query lucide-react
```

### 3단계: 환경 변수

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

### 4단계: Supabase 클라이언트 생성

```typescript
// lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
```

### 5단계: 데이터베이스 테이블 생성

Supabase Dashboard SQL Editor에서 실행:

```sql
-- 1. users 테이블 (단순화)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(100) NOT NULL,
    role VARCHAR(20) CHECK (role IN ('teacher', 'student')),
    email VARCHAR(255) UNIQUE,
    password_hash VARCHAR(255),
    access_token UUID UNIQUE DEFAULT uuid_generate_v4(),
    daily_goal INT DEFAULT 50,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_users_role ON users(role);
CREATE INDEX idx_users_access_token ON users(access_token);

-- 2. 나머지 테이블은 마스터 플랜 참조
-- (wordlists, words, student_wordlists, student_word_progress, completed_wordlists, online_tests, offline_tests)
```

### 6단계: 첫 페이지 생성

```tsx
// app/page.tsx (홈페이지)
export default function HomePage() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center space-y-6">
        <h1 className="text-5xl font-bold">Todo Voca</h1>
        <p className="text-xl text-muted-foreground">
          체크리스트 단어장
        </p>
        <div className="space-x-4">
          <Button asChild size="lg">
            <Link href="/teacher/login">강사 로그인</Link>
          </Button>
        </div>
      </div>
    </div>
  )
}
```

### 7단계: 개발 서버 실행

```bash
npm run dev
```

---

## 📁 프로젝트 구조

```
todo-voca/
├── app/
│   ├── page.tsx                    # 홈페이지
│   ├── s/
│   │   └── [token]/
│   │       ├── page.tsx           # 학생 학습 화면
│   │       └── test/
│   │           └── page.tsx       # 온라인 평가
│   └── teacher/
│       ├── login/
│       │   └── page.tsx           # 강사 로그인
│       ├── page.tsx               # 강사 대시보드
│       └── wordlist/
│           └── [id]/
│               └── students/
│                   └── page.tsx   # 학생 현황
│
├── components/
│   ├── ui/                        # Shadcn UI 컴포넌트
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── dialog.tsx
│   │   └── ...
│   ├── student/
│   │   ├── study-screen.tsx       # 학습 화면
│   │   ├── completed-list.tsx     # 완료 목록
│   │   ├── skip-modal-minimal.tsx # Skip 모달 (1-2회)
│   │   ├── skip-modal-medium.tsx  # Skip 모달 (3-4회)
│   │   ├── goal-achieved-modal.tsx
│   │   ├── online-test.tsx
│   │   └── test-result.tsx
│   └── teacher/
│       ├── wordlist-card.tsx
│       ├── student-table.tsx
│       └── add-student-dialog.tsx
│
├── hooks/
│   ├── useStudySession.ts         # 학습 세션 관리
│   ├── useOnlineTest.ts           # 온라인 평가
│   └── useStudentProgress.ts      # 학생 진도
│
├── lib/
│   ├── supabase.ts                # Supabase 클라이언트
│   ├── test-grader.ts             # 자동 채점
│   └── utils.ts                   # 유틸리티
│
├── types/
│   ├── word.ts
│   ├── progress.ts
│   └── test.ts
│
└── docs/
    ├── 0_마스터플랜.md
    └── 1_상세개발플랜.md          # 이 문서
```

---

## 🔄 다음 단계

1. **Agent 모드에서 요청**: "Phase 1 Week 1 Day 1-2 환경 설정 시작"
2. **프로젝트 초기화 자동화 스크립트 실행**
3. **첫 화면 개발 시작**

---

## 📝 개발 진행 방법

각 작업을 시작할 때:
```
✅ 완료: [날짜] - [비고]
🔄 진행중: 현재 작업 중
⬜ 대기: 아직 시작 안 함
```

위 "개발 진행 상황" 섹션의 체크박스를 업데이트하며 진행하세요!

---

**이 문서는 실시간으로 업데이트됩니다. 작업 완료 시 상태를 변경해주세요!**

