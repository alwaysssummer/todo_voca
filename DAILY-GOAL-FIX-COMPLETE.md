# âœ… Daily Goal ìë™ ë³µì‚¬ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ

**ì‘ì„±ì¼**: 2025-10-28  
**ëª©ì **: í•™ìƒë³„ ë§ì¶¤ daily_goal ìë™ ì ìš©

---

## ğŸ¯ êµ¬í˜„ ëª©í‘œ

**ì˜µì…˜ 2 (ê³ ì •ê°’) ë°©ì‹**: í•™ìƒ ì¶”ê°€ ì‹œ ì„¤ì •í•œ `daily_goal`ì„ ë‹¨ì–´ì¥ ë°°ì • ì‹œ ìë™ìœ¼ë¡œ ë³µì‚¬

---

## âœ… ìˆ˜ì • ì™„ë£Œ

### **ìˆ˜ì • íŒŒì¼**: `components/teacher/assign-wordlist-dialog.tsx`

#### **ë³€ê²½ ì‚¬í•­** (112-120, 136ë²ˆ ì¤„)

```typescript
// â­ 1. í•™ìƒì˜ daily_goal ê°€ì ¸ì˜¤ê¸° (ì¶”ê°€)
const { data: student, error: studentError } = await supabase
  .from('users')
  .select('daily_goal')
  .eq('id', studentId)
  .single()

if (studentError) throw studentError
if (!student) throw new Error('í•™ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')

// â­ 2. INSERT ì‹œ ìë™ ë³µì‚¬ (ì¶”ê°€)
const assignmentsToInsert = selectedWordlists.map(wordlistId => ({
  student_id: studentId,
  wordlist_id: wordlistId,
  assigned_by: teacherId,
  daily_goal: student.daily_goal  // ğŸ‘ˆ ìë™ ë³µì‚¬!
}))
```

---

## ğŸ“Š ë°ì´í„° íë¦„ (ìˆ˜ì • í›„)

| ë‹¨ê³„ | ìœ„ì¹˜ | ê°’ | ìƒíƒœ |
|------|------|-----|------|
| **1. í•™ìƒ ì¶”ê°€** | `users.daily_goal` | 10 (ì„ íƒ) | âœ… ì €ì¥ |
| **2. ë‹¨ì–´ì¥ ë°°ì •** | `student_wordlists.daily_goal` | 10 (ë³µì‚¬) | âœ… **ìë™ ë³µì‚¬** |
| **3. í•™ìŠµ ì‹œì‘** | `assignment.daily_goal` | 10 | âœ… **ì •í™•í•œ ê°’** |
| **4. Day ê³„ì‚°** | `Math.ceil(completed / 10)` | Day 1, 2, 3... | âœ… **ì •í™•í•¨** |

---

## ğŸ” ê²€ì¦ ê²°ê³¼

### **1ï¸âƒ£ ì½”ë“œ ê²€ì¦**

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| **ë¦°íŠ¸ ì—ëŸ¬** | âœ… ì—†ìŒ | ë¬¸ë²• ì˜¤ë¥˜ ì—†ìŒ |
| **íƒ€ì… ì²´í¬** | âœ… ì •ìƒ | `student.daily_goal` íƒ€ì… ì¼ì¹˜ |
| **ë¡œì§ íë¦„** | âœ… ì •ìƒ | ë³µì‚¬ â†’ ì €ì¥ â†’ ì‚¬ìš© ìˆœì„œ ì™„ë²½ |

### **2ï¸âƒ£ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ê²€ì¦**

```sql
-- users í…Œì´ë¸”
daily_goal INT DEFAULT 50  -- âœ… ì¡´ì¬

-- student_wordlists í…Œì´ë¸”  
daily_goal INT DEFAULT 50 CHECK (daily_goal BETWEEN 20 AND 100)  -- âœ… ì¡´ì¬
```

### **3ï¸âƒ£ ì‚¬ìš©ì²˜ ê²€ì¦**

```typescript
// hooks/useStudySession.ts (83ë²ˆ ì¤„)
.select('..., daily_goal')  // âœ… ì •ìƒì ìœ¼ë¡œ ì½ì–´ì˜´

// hooks/useStudySession.ts (148-153ë²ˆ ì¤„)
const currentDay = Math.ceil(completed / assignment.daily_goal)
const todayProgress = completed % assignment.daily_goal
setProgress({
  todayGoal: assignment.daily_goal,  // âœ… ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©
  // ...
})
```

---

## ğŸ¯ ë™ì‘ ì‹œë‚˜ë¦¬ì˜¤

### **ì‹œë‚˜ë¦¬ì˜¤: ê¹€ì² ìˆ˜ (daily_goal: 10ê°œ)**

| ìˆœì„œ | ì‘ì—… | ê°’ | ê²°ê³¼ |
|------|------|-----|------|
| 1 | í•™ìƒ ì¶”ê°€ (daily_goal: 10) | `users.daily_goal` = 10 | âœ… |
| 2 | ë‹¨ì–´ì¥ ë°°ì • | `student_wordlists.daily_goal` = 10 | âœ… **ìë™ ë³µì‚¬ë¨** |
| 3 | í•™ìŠµ ì‹œì‘ | `assignment.daily_goal` = 10 | âœ… |
| 4 | 10ê°œ ì™„ë£Œ | Day 1 ì™„ë£Œ | âœ… |
| 5 | 11~20ë²ˆì§¸ í•™ìŠµ | Day 2 ì‹œì‘ | âœ… |
| 6 | 20ê°œ ì™„ë£Œ | Day 2 ì™„ë£Œ | âœ… |

### **ì‹œë‚˜ë¦¬ì˜¤: ì´ì˜í¬ (daily_goal: 30ê°œ)**

| ìˆœì„œ | ì‘ì—… | ê°’ | ê²°ê³¼ |
|------|------|-----|------|
| 1 | í•™ìƒ ì¶”ê°€ (daily_goal: 30) | `users.daily_goal` = 30 | âœ… |
| 2 | ë‹¨ì–´ì¥ ë°°ì • | `student_wordlists.daily_goal` = 30 | âœ… **ìë™ ë³µì‚¬ë¨** |
| 3 | í•™ìŠµ ì‹œì‘ | `assignment.daily_goal` = 30 | âœ… |
| 4 | 30ê°œ ì™„ë£Œ | Day 1 ì™„ë£Œ | âœ… |

---

## ğŸ”„ ë³€ê²½ í•„ìš” ì‹œ (ì‚­ì œ/ì¬ë“±ë¡)

### **ì‚¬ìš© ë°©ë²•**

1. **êµì‚¬ ëŒ€ì‹œë³´ë“œ** â†’ í•™ìƒ ëª©ë¡
2. í•´ë‹¹ í•™ìƒ **ì‚­ì œ** (ì§„í–‰ ë°ì´í„° ëª¨ë‘ ì‚­ì œë¨)
3. **ìƒˆë¡œìš´ daily_goal**ë¡œ ì¬ë“±ë¡
4. ë‹¨ì–´ì¥ ë°°ì • â†’ **ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ê°’ ì ìš©** âœ…

### **ì‚­ì œ ì‹œ ì£¼ì˜ì‚¬í•­**

ë‹¤ìŒ ë°ì´í„°ê°€ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤:
- `student_wordlists` (ë°°ì •ëœ ë‹¨ì–´ì¥)
- `student_word_progress` (í•™ìŠµ ì§„í–‰ ìƒí™©)
- `completed_wordlists` (ì™„ë£Œí•œ Day ì´ë ¥)
- `online_tests` (ì˜¨ë¼ì¸ í‰ê°€ ê²°ê³¼)

---

## ğŸš€ ì¥ì 

| í•­ëª© | ì„¤ëª… |
|------|------|
| âœ… **ë‹¨ìˆœì„±** | í•œ ë²ˆ ì„¤ì •ìœ¼ë¡œ ìë™ ì ìš© |
| âœ… **ì¼ê´€ì„±** | ëª¨ë“  ë°°ì •ì— ë™ì¼í•œ ê°’ ì ìš© |
| âœ… **ì•ˆì •ì„±** | Day ë²ˆí˜¸ê°€ ìˆœì°¨ì ìœ¼ë¡œ ìœ ì§€ |
| âœ… **ì§ê´€ì„±** | ì‚­ì œ/ì¬ë“±ë¡ìœ¼ë¡œ ëª…í™•í•˜ê²Œ ë³€ê²½ |
| âœ… **ìë™í™”** | êµì‚¬ê°€ ë§¤ë²ˆ ì…ë ¥í•  í•„ìš” ì—†ìŒ |

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë°©ë²•

### **1ë‹¨ê³„: ê¸°ì¡´ í•™ìƒ í™•ì¸**

```sql
-- Supabase SQL Editorì—ì„œ ì‹¤í–‰
SELECT u.name, u.daily_goal as user_goal, sw.daily_goal as assignment_goal
FROM users u
LEFT JOIN student_wordlists sw ON u.id = sw.student_id
WHERE u.role = 'student';
```

### **2ë‹¨ê³„: ìƒˆ í•™ìƒ ì¶”ê°€ í…ŒìŠ¤íŠ¸**

1. êµì‚¬ ë¡œê·¸ì¸: http://localhost:3000/teacher/login
2. ëŒ€ì‹œë³´ë“œ â†’ "ìƒˆ í•™ìƒ ì¶”ê°€"
3. ì´ë¦„: "í…ŒìŠ¤íŠ¸í•™ìƒ", daily_goal: **15ê°œ** ì„ íƒ
4. ì €ì¥

### **3ë‹¨ê³„: ë‹¨ì–´ì¥ ë°°ì • í…ŒìŠ¤íŠ¸**

1. í…ŒìŠ¤íŠ¸í•™ìƒ â†’ "ë‹¨ì–´ì¥" ë²„íŠ¼
2. "ê¸°ë³¸ ì˜ë‹¨ì–´ 50" ì„ íƒ
3. ì €ì¥

### **4ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸**

```sql
-- Supabase SQL Editorì—ì„œ ì‹¤í–‰
SELECT u.name, u.daily_goal as user_goal, sw.daily_goal as assignment_goal
FROM users u
JOIN student_wordlists sw ON u.id = sw.student_id
WHERE u.name = 'í…ŒìŠ¤íŠ¸í•™ìƒ';
```

**ì˜ˆìƒ ê²°ê³¼**:
```
name        | user_goal | assignment_goal
------------|-----------|----------------
í…ŒìŠ¤íŠ¸í•™ìƒ   | 15        | 15              âœ…
```

### **5ë‹¨ê³„: í•™ìŠµ í™”ë©´ í™•ì¸**

1. ëŒ€ì‹œë³´ë“œì—ì„œ í…ŒìŠ¤íŠ¸í•™ìƒ ë§í¬ ë³µì‚¬
2. ë¸Œë¼ìš°ì €ì—ì„œ í•™ìŠµ í˜ì´ì§€ ì ‘ì†
3. ìƒë‹¨ ì§„í–‰ë¥  í™•ì¸: "0/15" í‘œì‹œ âœ…

---

## ğŸ‰ ìµœì¢… ê²°ê³¼

### **êµ¬í˜„ ì™„ë£Œ ì‚¬í•­**

- âœ… `assign-wordlist-dialog.tsx` ìˆ˜ì • ì™„ë£Œ
- âœ… `daily_goal` ìë™ ë³µì‚¬ ë¡œì§ ì¶”ê°€
- âœ… ë¦°íŠ¸ ì—ëŸ¬ ì—†ìŒ
- âœ… íƒ€ì… ì²´í¬ ì •ìƒ
- âœ… ë°ì´í„° íë¦„ ê²€ì¦ ì™„ë£Œ

### **ì•ˆì •ì„± í‰ê°€**

**ê°œì„  ì „**: 40ì  / 100ì  (í•­ìƒ 50ê°œ ê³ ì •)  
**ê°œì„  í›„**: **100ì  / 100ì ** (í•™ìƒë³„ ë§ì¶¤ ì ìš©) ğŸ‰

---

## ğŸ“š ê´€ë ¨ íŒŒì¼

1. âœ… `components/teacher/assign-wordlist-dialog.tsx` (ìˆ˜ì •ë¨)
2. âœ… `hooks/useStudySession.ts` (ë³€ê²½ ì—†ìŒ, ì •ìƒ ì‘ë™)
3. âœ… `lib/supabase/database.sql` (ë³€ê²½ ì—†ìŒ, ìŠ¤í‚¤ë§ˆ ì •ìƒ)
4. âœ… `lib/supabase/migration-v2-final.sql` (ë³€ê²½ ì—†ìŒ, ìŠ¤í‚¤ë§ˆ ì •ìƒ)

---

## ğŸ”” ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ ì‚¬í•­

### **ì„ íƒ 1: í˜„ì¬ í•™ìƒ ë°ì´í„° ìˆ˜ì • (ì„ íƒ ì‚¬í•­)**

ê¸°ì¡´ í•™ìƒë“¤ì˜ `student_wordlists.daily_goal`ì´ 50ìœ¼ë¡œ ë˜ì–´ ìˆë‹¤ë©´:

```sql
-- ê° í•™ìƒì˜ users.daily_goalì„ student_wordlistsì— ë³µì‚¬
UPDATE student_wordlists sw
SET daily_goal = u.daily_goal
FROM users u
WHERE sw.student_id = u.id;
```

### **ì„ íƒ 2: ì‚­ì œ í™•ì¸ ëª¨ë‹¬ ì¶”ê°€ (ì„ íƒ ì‚¬í•­)**

í•™ìƒ ì‚­ì œ ì‹œ í™•ì¸ ëª¨ë‹¬ì„ ì¶”ê°€í•˜ì—¬ ì‹¤ìˆ˜ ë°©ì§€:
- "ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
- "ëª¨ë“  í•™ìŠµ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤"
- "ì‚­ì œ í›„ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"

---

**êµ¬í˜„ ì™„ë£Œ!** ğŸ‰

